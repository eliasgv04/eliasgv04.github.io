/* ===== Sección Home ===== */
.home-section {
  min-height: 100svh;
  background: var(--bg-body, #ffffff); /* usa variable del tema claro si existe */
  color: var(--text-color, #1e1f23);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  overflow: hidden;
  padding-top: calc(4rem + env(safe-area-inset-top, 0px)); /* compensar navbar fija + zona segura */
  padding-bottom: calc(1.5rem + env(safe-area-inset-bottom, 0px));
  position: relative;
}

/* Capa ambiental animada */
.home-section::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 35% 40%, rgba(255,0,90,0.18), transparent 60%),
    radial-gradient(circle at 70% 65%, rgba(0,140,255,0.15), transparent 65%),
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.07), transparent 70%);
  mix-blend-mode: screen;
  animation: ambientShift 22s linear infinite;
  pointer-events: none;
  opacity: .55;
}
html[data-theme='dark'] .home-section::before { opacity: .42; mix-blend-mode: lighten; }

@keyframes ambientShift {
  0% { transform: rotate(0deg) scale(1); filter: hue-rotate(0deg); }
  50% { transform: rotate(180deg) scale(1.05); filter: hue-rotate(140deg); }
  100% { transform: rotate(360deg) scale(1); filter: hue-rotate(360deg); }
}

/* Tocadiscos completo */
.turntable {
  position: relative;
  --disk-size: clamp(260px, 72vw, 420px);
  width: var(--disk-size);
  height: var(--disk-size);
}

.vinyl-container {
  position: relative;
  width: var(--disk-size); /* tamaño del vinilo */
  height: var(--disk-size);
}

/* Vinilo negro */
.vinyl {
  --vinyl-base: #050505;
  --vinyl-mid: #141414;
  --vinyl-edge: #000;
  --groove-color: rgba(255,255,255,0.06);
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background:
    radial-gradient(circle at 48% 45%, rgba(255,255,255,0.08), transparent 55%), /* leve hotspot */
    radial-gradient(circle at center, var(--vinyl-mid) 35%, var(--vinyl-base) 60%, var(--vinyl-edge) 78%);
  border: 12px solid #222;
  box-shadow: 0 0 50px rgba(0, 0, 0, 0.85), inset 0 0 18px rgba(255,255,255,0.05);
  animation: spin 6s linear infinite;
  animation-play-state: paused;
  position: relative;
  box-sizing: border-box;
  overflow: hidden; /* para contener reflejos */
}

/* Surcos del vinilo (pseudo capa) */
.vinyl::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background:
    repeating-radial-gradient(circle at center,
      transparent 0px,
      transparent 2px,
      var(--groove-color) 2.2px,
      transparent 2.4px
    );
  mix-blend-mode: screen;
  opacity: 0.4;
  pointer-events: none;
}

/* Reflejo diagonal sutil */
.vinyl::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0) 40%, rgba(255,255,255,0) 60%, rgba(255,255,255,0.15));
  mix-blend-mode: overlay;
  opacity: 0.35;
  pointer-events: none;
}

/* Anillo de texto */
.vinyl-text-ring {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: none;
  animation: spin 14s linear infinite; /* gira más lento para efecto premium */
  animation-play-state: inherit; /* sigue el estado del vinilo */
}

.vinyl-text-ring svg { width: 100%; height: 100%; }

.vinyl-text-ring .ring-text {
  font-size: 11px;
  font-family: system-ui, Arial, sans-serif;
  letter-spacing: 2px;
  fill: rgba(255,255,255,0.55);
  text-transform: uppercase;
}

.vinyl-text-ring .ring-text:hover { fill: rgba(255,255,255,0.9); }

/* Variantes de anillos */
/* Efecto halo e iridiscencia al reproducir (pseudo extra) */
.vinyl::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background:
    conic-gradient(from 0deg,
      rgba(255,0,120,0.06) 0deg,
      rgba(0,160,255,0.08) 90deg,
      rgba(120,255,0,0.05) 180deg,
      rgba(255,200,0,0.07) 270deg,
      rgba(255,0,120,0.06) 360deg),
    linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0) 40%, rgba(255,255,255,0) 60%, rgba(255,255,255,0.18));
  mix-blend-mode: overlay;
  opacity: 0.28;
  pointer-events: none;
  animation: sheen 18s linear infinite;
  animation-play-state: inherit;
}

@keyframes sheen {
  0% { filter: hue-rotate(0deg) brightness(1); }
  50% { filter: hue-rotate(180deg) brightness(1.05); }
  100% { filter: hue-rotate(360deg) brightness(1); }
}

/* Estado visual al reproducir */
.vinyl.playing {
  box-shadow: 0 0 55px rgba(255,0,0,0.35), inset 0 0 22px rgba(255,255,255,0.07);
}

.vinyl.playing .label {
  box-shadow: inset 0 0 14px rgba(0,0,0,0.6), 0 0 10px rgba(255,0,0,0.55);
  filter: brightness(1.08) saturate(1.15);
}

/* Label rojo centrado (ahora dentro de .vinyl para que gire con el disco si se desea) */
.label {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: clamp(88px, 27vw, 120px);
  height: clamp(88px, 27vw, 120px);
  border-radius: 50%;
  background:
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.35), rgba(255,255,255,0) 55%),
    radial-gradient(circle at center, crimson 0%, #8c0f24 70%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: #fff;
  text-align: center;
  padding: 8px 6px;
  box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.55), 0 0 6px rgba(255,0,0,0.4);
  /* Quitamos animación propia para no romper el translate; si quieres que rote, deja que rote el padre (.vinyl) */
  animation: none;
  z-index: 5;
  box-sizing: border-box;
  pointer-events: none; /* evita interferir con clicks (opcional) */
}

/* Ecualizador mini reubicado bajo el botón Play */
.mini-eq { display:flex; gap:8px; justify-content:center; align-items:flex-end; height: clamp(36px, 8vw, 44px); }
.time-display { font-size:.75rem; font-weight:500; letter-spacing:.5px; color:var(--text-soft,#555); }
html[data-theme='dark'] .time-display { color:#b8bec4; }

/* Parallax suave del tocadiscos */
.turntable { transition: transform .35s cubic-bezier(.25,.8,.3,1); will-change: transform; }
.turntable.parallax-active { transition: transform .08s linear; }

/* Color dinámico (controlado por --accent-shift desde JS) */
.vinyl.dynamic-color { filter: hue-rotate(var(--accent-shift,0deg)); transition: filter .5s linear; }
.vinyl.playing.dynamic-color { filter: hue-rotate(var(--accent-shift,0deg)) saturate(1.08); }
.mini-eq span { width:6px; height:100%; background:linear-gradient(var(--primary,#d11141), var(--primary-accent,#ff3d5e)); border-radius:3px; transform-origin:bottom center; transform:scaleY(.15); transition:transform .18s linear, filter .3s ease; filter:brightness(.9); }
.playing-audio .mini-eq span { filter:brightness(1.15); }

/* Pulso reactivo */
.audio-pulse {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);
  width: calc(var(--disk-size) - 80px);
  height: calc(var(--disk-size) - 80px);
  border-radius: 50%;
  background: radial-gradient(circle at center, rgba(209,17,65,0.35), rgba(209,17,65,0) 60%);
  pointer-events: none;
  opacity: 0;
  transition: opacity .6s ease, transform .4s ease;
  z-index: 1;
}
.vinyl.playing ~ .audio-pulse { opacity: .55; }

/* Ajuste label brillo dinámico (variable aplicada desde JS) */
.label { --level: 0; box-shadow: inset 0 0 12px rgba(0,0,0,0.55), 0 0 calc(6px + (var(--level)*14px)) rgba(255,0,0,0.35); }
.vinyl.playing + .mini-eq + .audio-pulse, .vinyl.playing { filter: saturate(1.05); }
/* (Animación eliminada a petición: barras estáticas) */

/* Progreso circular alrededor del label */
.track-progress { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) rotate(-90deg); width: clamp(120px, 34vw, 150px); height: clamp(120px, 34vw, 150px); pointer-events:none; z-index:4; }

/* Knob de volumen */
.volume-knob-wrapper { position: absolute; top:50%; left:-95px; transform:translateY(-50%); display:flex; flex-direction:column; align-items:center; gap:.35rem; user-select:none; }
.volume-label { font-size:.65rem; text-transform:uppercase; letter-spacing:1px; font-weight:600; color: var(--text-soft,#666); }
html[data-theme='dark'] .volume-label { color:#aab1b7; }
.aux-knobs { display:flex; flex-direction:column; gap:.9rem; margin-top:.5rem; }
.knob-group { display:flex; flex-direction:column; align-items:center; gap:.4rem; }
.mini-knob-label { font-size:.6rem; font-weight:600; letter-spacing:1px; text-transform:uppercase; color:var(--text-soft,#666); }
html[data-theme='dark'] .mini-knob-label { color:#aab1b7; }
.mini-knob { --angle:-120deg; width:52px; height:52px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #3b3d40, #151719 70%); position:relative; box-shadow:0 4px 14px -4px rgba(0,0,0,0.55), inset 0 0 6px rgba(255,255,255,0.07); cursor:pointer; transition:box-shadow .4s ease, filter .4s ease; }
html[data-theme='dark'] .mini-knob { background:radial-gradient(circle at 30% 30%, #4a4d53, #121417 70%); }
.mini-knob::before { content:""; position:absolute; inset:6px; border-radius:50%; background:radial-gradient(circle at 35% 35%, #1e2023,#0c0d0f); box-shadow:inset 0 0 6px rgba(0,0,0,0.7), 0 0 2px rgba(255,255,255,0.05); }
.mini-knob::after { content:""; position:absolute; top:50%; left:50%; width:5px; height:20px; background:linear-gradient(var(--primary,#d11141), var(--primary-accent,#ff3d5e)); border-radius:3px; transform-origin:50% 85%; transform:translate(-50%,-50%) rotate(var(--angle)); box-shadow:0 0 4px rgba(209,17,65,0.45); transition:transform .45s cubic-bezier(.34,1.56,.38,1), filter .5s ease; }
.mini-knob[data-state="on"] { --angle:120deg; }
.mini-knob[data-state="off"] { --angle:-120deg; }
.mini-knob:hover { filter:brightness(1.08); }
.mini-knob:focus { outline:3px solid var(--primary,#d11141); outline-offset:3px; }
.mini-knob.active { box-shadow:0 0 14px rgba(209,17,65,0.6), inset 0 0 6px rgba(255,255,255,0.18); }

.volume-knob {
  --angle: 210deg; /* ángulo inicial (map a 80%) */
  width: 72px;
  height: 72px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #3b3d40, #151719 70%);
  position: relative;
  box-shadow: 0 6px 18px -6px rgba(0,0,0,0.5), inset 0 0 8px rgba(255,255,255,0.08);
  cursor: grab;
  transition: box-shadow .3s ease;
}
html[data-theme='dark'] .volume-knob { background: radial-gradient(circle at 30% 30%, #4a4d53, #121417 70%); }
.volume-knob:active { cursor: grabbing; }
.volume-knob:focus { outline: 3px solid var(--primary,#d11141); outline-offset: 3px; }

.volume-knob::before {
  content: "";
  position: absolute;
  inset: 6px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, #1e2023, #0c0d0f);
  box-shadow: inset 0 0 6px rgba(0,0,0,0.7), 0 0 2px rgba(255,255,255,0.06);
}

.volume-knob::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 6px;
  height: 26px;
  background: linear-gradient(var(--primary,#d11141), var(--primary-accent,#ff3d5e));
  border-radius: 3px;
  transform-origin: 50% 85%;
  transform: translate(-50%,-50%) rotate(var(--angle));
  box-shadow: 0 0 6px rgba(209,17,65,0.5);
}

.volume-value { font-size: .75rem; font-weight: 500; color: var(--text-soft,#555); letter-spacing: .5px; }
html[data-theme='dark'] .volume-value { color: #b6bcc3; }

@media (max-width: 680px) {
  /* Más aire arriba para que se vea el texto del encabezado en móviles */
  .home-section { padding-top: calc(6rem + env(safe-area-inset-top, 0px)); }

  /* Reservamos espacio extra bajo el disco para los controles */
  .turntable { height: calc(var(--disk-size) + 170px); }

  /* Pasamos los controles a flujo normal para que no se monten con el botón Play */
  .volume-knob-wrapper {
    position: static;
    left: auto;
    top: auto;
    transform: none;
    margin-top: 14px;
    flex-direction: column;
    align-items: center;
    gap: .6rem;
    z-index: 2;
  }
  /* Fila compacta de mini-knobs */
  .aux-knobs {
    flex-direction: row;
    align-items: center;
    gap: .6rem;
    margin: 0;
    order: 3; /* los mini-knobs van después del knob grande y su valor */
  }
  /* Reducimos tamaños para ganar aire */
  .mini-knob { width: 44px; height: 44px; }
  .volume-knob { width: 62px; height: 62px; }
  .volume-label, .volume-value { font-size: .6rem; }
  .volume-label { order: 0; }
  .volume-knob { order: 1; }
  .volume-value { order: 2; margin-bottom: .8rem; }
  /* Más margen entre el porcentaje y el botón Play */
  #togglePlay { margin-top: 1.4rem; }
}
.track-progress circle { fill:none; stroke-width:4; }
.track-progress .bg { stroke: rgba(255,255,255,0.15); }
.track-progress .fg { stroke: var(--primary,#d11141); stroke-linecap:round; stroke-dasharray:339.292; stroke-dashoffset:339.292; transition: stroke-dashoffset .3s linear; }

/* Estado reproducción activa */
/* .vinyl.playing .mini-eq span { }  (sin animación) */

.label .artist-name {
  font-size: clamp(0.9rem, 3.8vw, 1.05rem);
  line-height: 1.1;
  margin: 0 0 4px 0;
  font-weight: 700;
}

.label .profession {
  font-size: clamp(0.6rem, 2.8vw, 0.75rem);
  margin: 0;
  line-height: 1.1;
  letter-spacing: 0.5px;
}

/* Aguja (reposo: vertical abajo derecha) */
.tonearm {
  position: absolute;
  width: 16px;            /* grosor del brazo */
  height: 260px;          /* longitud del brazo */
  background: linear-gradient(180deg,#666,#858585);
  border-radius: 10px;
  bottom: 0;              /* base al borde inferior del área */
  right: 4px;             /* pegada casi al borde derecho */
  transform-origin: 50% 100%; /* pivote en la base */
  transform: rotate(0deg); /* vertical recta en reposo */
  transition: transform 1s ease;
  box-shadow: 2px 2px 8px rgba(0,0,0,0.45);
  z-index: 10;
}

@media (max-width: 680px) {
  .tonearm { display: none; }
}

/* Cabezal + cápsula + aguja */
.tonearm::after {
  content: "";
  position: absolute;
  top: 4px;               /* parte superior (zona que entrará en el vinilo) */
  left: 50%;
  transform: translateX(-50%);
  width: 28px;
  height: 26px;
  background: #444;
  border-radius: 4px 4px 10px 10px;
  box-shadow: 0 0 4px rgba(0,0,0,0.5), inset 0 0 4px rgba(255,255,255,0.15);
}

/* Punta fina */
.tonearm::before {
  content: "";
  position: absolute;
  top: 0px;
  left: 50%;
  transform: translateX(-50%);
  width: 6px;
  height: 8px;
  background: crimson;
  border-radius: 2px 2px 3px 3px;
  box-shadow: 0 0 3px rgba(0,0,0,0.6);
}

/* Reproduciendo: rotamos hacia la izquierda para que la punta caiga sobre el surco exterior */
.tonearm.playing {
  transform: rotate(-24deg); /* ajusta este valor si quieres que entre más/menos */
}

/* Animación de giro */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Botón Play/Pause */
#togglePlay {
  font-size: clamp(1rem, 3.8vw, 1.2rem);
  font-weight: bold;
  padding: 10px 25px;
  border-radius: 30px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
}

#togglePlay.playing {
  background: crimson;
  color: white;
  box-shadow: 0 0 20px crimson;
}
