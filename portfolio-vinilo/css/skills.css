/* =============================
   Sección Skills - Mixer Vertical
   ============================= */

:root {
	--skill-bg: var(--surface, #ffffff);
	--skill-alt: var(--surface-alt, #f5f6f7);
	--skill-border: var(--border-color, #d7d9de);
}

[data-theme="dark"] {
	--skill-bg: #181a1f;
	--skill-alt: #1f2227;
	--skill-border: #2e333a;
}

.skills-section {
	position: relative;
	background: linear-gradient(180deg,var(--background,#fafafa),var(--background-alt,#eef0f2));
}
[data-theme="dark"] .skills-section { background: linear-gradient(180deg,#101114,#15171b); }

/* Fondo reactivo detrás del mixer */
.skills-section::before {
	content:"";
	position:absolute; inset:0;
	background:radial-gradient(circle at 50% 40%,rgba(255,120,60,.18),rgba(255,60,120,.08) 30%,rgba(40,80,255,.06) 55%,transparent 70%);
	pointer-events:none;
	mix-blend-mode:overlay;
	opacity:.9;
}
[data-theme="dark"] .skills-section::before { background:radial-gradient(circle at 50% 40%,rgba(255,120,60,.25),rgba(255,60,120,.12) 35%,rgba(90,120,255,.10) 60%,transparent 75%); }

.skills-intro { max-width:760px; font-size:.9rem; color: var(--proj-text-dim,#5a616b); margin-bottom:2rem; }
[data-theme="dark"] .skills-intro { color:#a9b1bd; }

/* Mixer layout */
.skills-mixer { display:flex; gap:1.5rem; align-items:flex-end; flex-wrap:wrap; justify-content:center; margin-inline:auto; }
.skill-channel { width:92px; display:flex; flex-direction:column; align-items:center; position:relative; }
.skill-channel .channel-inner { width:100%; display:flex; flex-direction:column; align-items:center; gap:.8rem; }
.meter { position:relative; width: 46px; height:260px; background:#111; border-radius:10px; padding:6px 6px 10px; display:flex; flex-direction:column-reverse; gap:4px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.04), 0 2px 6px -2px rgba(0,0,0,.45); }
[data-theme="light"] .meter { background:#181b1f; }
.meter .seg { flex:1; width:100%; border-radius:4px; background:#22272c; box-shadow: inset 0 0 0 1px rgba(0,0,0,.6); position:relative; overflow:hidden; }
.meter .seg.active { animation: segOn .6s ease forwards; }
@keyframes segOn { 0% { opacity:.15; transform:scaleY(.3); filter:brightness(.6); } 70% { opacity:1; transform:scaleY(1.05); } 100% { opacity:1; transform:scaleY(1); } }
.meter .seg[data-zone="green"] { background: linear-gradient(180deg,#2fe868,#18b84a); }
.meter .seg[data-zone="amber"] { background: linear-gradient(180deg,#ffca55,#ff9d1c); }
.meter .seg[data-zone="red"] { background: linear-gradient(180deg,#ff5d5d,#e01d1d); }
.meter::before { content:""; position:absolute; inset:0; background: linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,0) 40%); mix-blend-mode:overlay; pointer-events:none; }
/* Reflejo inferior sutil */
.meter::after { content:""; position:absolute; left:8%; right:8%; bottom:4px; height:26px; background:linear-gradient(180deg,rgba(255,255,255,.15),rgba(255,255,255,0)); filter:blur(6px); opacity:.35; pointer-events:none; }

/* Indicador de pico */
.meter .peak { position:absolute; left:10%; right:10%; height:6px; border-radius:3px; background:linear-gradient(90deg,#ffe37a,#ff934f); top:4px; box-shadow:0 0 6px 2px rgba(255,180,80,.55); opacity:0; transform:translateY(-6px); }
.meter.show-peak .peak { animation: peakDrop 2.6s ease-out forwards; }
@keyframes peakDrop { 0% { opacity:0; transform:translateY(-6px);} 8% { opacity:1; transform:translateY(0);} 75% { opacity:1; } 100% { opacity:0; transform:translateY(4px);} }

.channel-label { text-align:center; display:flex; flex-direction:column; gap:.55rem; min-height:86px; justify-content:flex-start; }
.chan-icon { width:46px; height:46px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:.65rem; font-weight:700; letter-spacing:.5px; background:var(--skill-alt); color:var(--text-color,#1e2226); box-shadow:0 1px 2px rgba(0,0,0,.35), 0 0 0 1px var(--skill-border); margin-inline:auto; }
.skill-channel { position:relative; }
.skill-channel:hover .chan-icon { box-shadow:0 2px 6px -1px rgba(0,0,0,.5), 0 0 0 1px var(--skill-border), 0 0 0 3px rgba(255,255,255,.06); }

/* Tooltip */
.skill-channel[data-info] .tool-tip { position:absolute; left:50%; bottom:100%; transform:translate(-50%, -10px); background:rgba(20,22,26,.96); color:#f1f3f5; font-size:.6rem; line-height:1.3; padding:.45rem .55rem .5rem; width:130px; text-align:center; border-radius:8px; opacity:0; pointer-events:none; transition:.28s ease; box-shadow:0 4px 14px -4px rgba(0,0,0,.5), 0 0 0 1px rgba(255,255,255,.07); backdrop-filter:blur(4px); }
[data-theme="dark"] .skill-channel[data-info] .tool-tip { background:rgba(30,32,36,.92); }
.skill-channel[data-info]:hover .tool-tip, .skill-channel[data-info]:focus-within .tool-tip { opacity:1; transform:translate(-50%, -4px); }
.tool-tip::after { content:""; position:absolute; left:50%; bottom:-5px; transform:translateX(-50%); width:10px; height:10px; background:inherit; clip-path:polygon(50% 100%,0 50%,100% 50%); }
.skill-channel:focus-within .chan-icon { outline:2px solid var(--focus,#ff7f50); outline-offset:3px; }

/* Pausa visual (reduce brillo) */
[data-theme="dark"] .chan-icon { color:#eceff3; }
.chan-name { font-size:.62rem; font-weight:600; letter-spacing:.6px; text-transform:uppercase; opacity:.9; line-height:1.15; }
.chan-pct { display:none; }
.tech-icon { width:70%; height:70%; display:block; }

/* Icon color variants */
.ci-html { background: linear-gradient(135deg,#ff6a2d,#ff934f); color:#fff; }
.ci-js { background: linear-gradient(135deg,#efd81d,#f5e75b); color:#1d1d1d; }
.ci-git { background: linear-gradient(135deg,#f05133,#ff784f); color:#fff; }
.ci-py { background: linear-gradient(135deg,#356ea0,#ffd141); color:#fff; font-size:.58rem; }
.ci-a11y { background: linear-gradient(135deg,#7f5dff,#5d3bcc); color:#fff; }
.ci-sql { background: linear-gradient(135deg,#268bd2,#135d99); color:#fff; }
.ci-mgmt { background: linear-gradient(135deg,#ff8c42,#ffba42); color:#fff; }
.ci-swift { background: linear-gradient(135deg,#ff5d2d,#ff8e2d); color:#fff; }
.ci-cs { background: linear-gradient(135deg,#9b4dff,#6f30c9); color:#fff; }
.ci-design { background: linear-gradient(135deg,#ff2e63,#ffa07a); color:#fff; font-size:.9rem; }

/* Stagger reveal */
.skill-channel { opacity:0; transform:translateY(18px); animation: channelIn .75s forwards; }
.skill-channel:nth-child(1){ animation-delay:.05s; }
.skill-channel:nth-child(2){ animation-delay:.1s; }
.skill-channel:nth-child(3){ animation-delay:.15s; }
.skill-channel:nth-child(4){ animation-delay:.2s; }
.skill-channel:nth-child(5){ animation-delay:.25s; }
.skill-channel:nth-child(6){ animation-delay:.3s; }
.skill-channel:nth-child(7){ animation-delay:.35s; }
.skill-channel:nth-child(8){ animation-delay:.4s; }
.skill-channel:nth-child(9){ animation-delay:.45s; }
@keyframes channelIn { to { opacity:1; transform:translateY(0); } }

@media (max-width: 840px){
	.skills-mixer { gap:1.2rem; }
	.skill-channel { width:74px; }
	.meter { width:40px; height:220px; }
	.channel-label { min-height:74px; gap:.5rem; }
	.chan-icon { width:40px; height:40px; }
}
@media (max-width: 560px){
	.skills-mixer { gap:.85rem; }
	.skill-channel { width:60px; }
	.meter { width:32px; height:190px; padding:5px 5px 8px; gap:3px; }
	.channel-label { min-height:62px; gap:.45rem; }
	.chan-icon { width:32px; height:32px; font-size:.55rem; }
	.chan-name { font-size:.53rem; }
}

@media (prefers-reduced-motion: reduce){
	.skill-channel { animation:none !important; opacity:1; transform:none; }
	.meter .seg.active { animation:none; }
}